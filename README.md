# demo

-- Создание таблицы типов материалов
CREATE TABLE material_type (
    material_type_id SERIAL PRIMARY KEY,
    type_name VARCHAR(100) NOT NULL,
    loss_percentage NUMERIC(10,6) NOT NULL
);

-- Создание таблицы поставщиков
CREATE TABLE suppliers (
    supplier_id SERIAL PRIMARY KEY,
    supplier_name VARCHAR(100) NOT NULL,
    supplier_type VARCHAR(50) NOT NULL,
    inn VARCHAR(20) NOT NULL,
    rating INTEGER NOT NULL,
    start_date TIMESTAMP NOT NULL,
    CONSTRAINT unique_supplier UNIQUE (supplier_name)
);

-- Создание таблицы материалов
CREATE TABLE materials (
    material_id SERIAL PRIMARY KEY,
    material_name VARCHAR(100) NOT NULL,
    material_type_id INTEGER REFERENCES material_type(material_type_id),
    unit_price NUMERIC(10,2) NOT NULL,
    stock_quantity NUMERIC(10,2) NOT NULL,
    min_quantity NUMERIC(10,2) NOT NULL,
    package_quantity NUMERIC(10,2) NOT NULL,
    unit_of_measure VARCHAR(20) NOT NULL,
    CONSTRAINT unique_material UNIQUE (material_name)
);

-- Создание таблицы связи материалов и поставщиков
CREATE TABLE material_suppliers (
    material_supplier_id SERIAL PRIMARY KEY,
    material_id INTEGER REFERENCES materials(material_id),
    supplier_id INTEGER REFERENCES suppliers(supplier_id),
    CONSTRAINT unique_material_supplier UNIQUE (material_id, supplier_id)
);

-- Создание таблицы типов продукции
CREATE TABLE product_types (
    product_type_id SERIAL PRIMARY KEY,
    type_name VARCHAR(100) NOT NULL,
    type_coefficient NUMERIC(10,2) NOT NULL,
    CONSTRAINT unique_product_type UNIQUE (type_name)
);


теперь заполняешь 

INSERT INTO material_type (type_name, loss_percentage) VALUES
('Пластичные материалы', 0.0012),
('Добавка', 0.002),
('Электролит', 0.0015),
('Глазурь', 0.003),
('Пигмент', 0.0025);

INSERT INTO suppliers (supplier_name, supplier_type, inn, rating, start_date) VALUES
('БрянскСтройресурс', 'ЗАО', '9432455179', 8, '2015-12-20 00:00:00'),
('Стройкомплект', 'ЗАО', '7803888520', 7, '2017-09-13 00:00:00'),
('Железногорская руда', 'ООО', '8430391035', 7, '2016-12-23 00:00:00'),
('Белая гора', 'ООО', '4318170454', 8, '2019-05-27 00:00:00'),
('Тульский обрабатывающий завод', 'ООО', '7687851800', 7, '2015-06-16 00:00:00'),
('ГорТехРазработка', 'ПАО', '6119144874', 9, '2021-12-27 00:00:00'),
('Сапфир', 'ОАО', '1122170258', 3, '2022-04-10 00:00:00'),
('ХимБытСервис', 'ПАО', '8355114917', 5, '2022-03-13 00:00:00'),
('ВоронежРудоКомбинат', 'ОАО', '3532367439', 8, '2023-11-11 00:00:00'),
('Смоленский добывающий комбинат', 'ОАО', '2362431140', 3, '2018-11-23 00:00:00'),
('МосКарьер', 'ПАО', '4159215346', 2, '2012-07-07 00:00:00'),
('КурскРесурс', 'ЗАО', '9032455179', 4, '2021-07-23 00:00:00'),
('Нижегородская разработка', 'ОАО', '3776671267', 9, '2016-05-23 00:00:00'),
('Речная долина', 'ОАО', '7447864518', 8, '2015-06-25 00:00:00'),
('Карелия добыча', 'ПАО', '9037040523', 6, '2017-03-09 00:00:00'),
('Московский ХимЗавод', 'ПАО', '6221520857', 4, '2015-05-07 00:00:00'),
('Горная компания', 'ЗАО', '2262431140', 3, '2020-12-22 00:00:00'),
('Минерал Ресурс', 'ООО', '4155215346', 7, '2015-05-22 00:00:00'),
('Арсенал', 'ЗАО', '3961234561', 5, '2010-11-25 00:00:00'),
('КамчаткаСтройМинералы', 'ЗАО', '9600275878', 7, '2016-12-20 00:00:00');

INSERT INTO materials (material_name, material_type_id, unit_price, stock_quantity, min_quantity, package_quantity, unit_of_measure) VALUES
('Глина', 1, 15.29, 1570.0, 5500.0, 30.0, 'кг'),
('Каолин', 1, 18.2, 1030.0, 3500.0, 25.0, 'кг'),
('Гидрослюда', 1, 17.2, 2147.0, 3500.0, 25.0, 'кг'),
('Монтмориллонит', 1, 17.67, 3000.0, 3000.0, 30.0, 'кг'),
('Перлит', 2, 13.99, 150.0, 1000.0, 50.0, 'л'),
('Стекло', 2, 2.4, 3000.0, 1500.0, 500.0, 'кг'),
('Дегидратированная глина', 2, 21.95, 3000.0, 2500.0, 20.0, 'кг'),
('Шамот', 2, 27.5, 2300.0, 1960.0, 20.0, 'кг'),
('Техническая сода', 3, 54.55, 1200.0, 1500.0, 25.0, 'кг'),
('Жидкое стекло', 3, 76.59, 500.0, 1500.0, 15.0, 'кг'),
('Кварц', 4, 375.96, 1500.0, 2500.0, 10.0, 'кг'),
('Полевой шпат', 4, 15.99, 750.0, 1500.0, 100.0, 'кг'),
('Краска-раствор', 5, 200.9, 1496.0, 2500.0, 5.0, 'л'),
('Порошок цветной', 5, 84.39, 511.0, 1750.0, 25.0, 'кг'),
('Кварцевый песок', 2, 4.29, 3000.0, 1600.0, 50.0, 'кг'),
('Жильный кварц', 2, 18.6, 2556.0, 1600.0, 25.0, 'кг'),
('Барий углекислый', 4, 303.64, 340.0, 1500.0, 25.0, 'кг'),
('Бура техническая', 4, 125.99, 165.0, 1300.0, 25.0, 'кг'),
('Углещелочной реагент', 3, 3.45, 450.0, 1100.0, 25.0, 'кг'),
('Пирофосфат натрия', 3, 700.99, 356.0, 1200.0, 25.0, 'кг');

INSERT INTO product_types (type_name, type_coefficient) VALUES
('Тип продукции 1', 1.2),
('Тип продукции 2', 8.59),
('Тип продукции 3', 3.45),
('Тип продукции 4', 5.6);

INSERT INTO material_suppliers (material_id, supplier_id)
SELECT m.material_id, s.supplier_id FROM (
    VALUES
    ('Краска-раствор', 'Арсенал'),
    ('Каолин', 'Железногорская руда'),
    ('Каолин', 'ВоронежРудоКомбинат'),
    ('Стекло', 'Арсенал'),
    ('Кварцевый песок', 'БрянскСтройресурс'),
    ('Перлит', 'ГорТехРазработка'),
    ('Глина', 'Белая гора'),
    ('Кварцевый песок', 'КамчаткаСтройМинералы'),
    ('Дегидратированная глина', 'ВоронежРудоКомбинат'),
    ('Полевой шпат', 'Белая гора'),
    ('Глина', 'БрянскСтройресурс'),
    ('Порошок цветной', 'Арсенал'),
    ('Жильный кварц', 'Горная компания'),
    ('Полевой шпат', 'БрянскСтройресурс'),
    ('Гидрослюда', 'ВоронежРудоКомбинат'),
    ('Стекло', 'КамчаткаСтройМинералы'),
    ('Полевой шпат', 'КурскРесурс'),
    ('Монтмориллонит', 'ВоронежРудоКомбинат'),
    ('Кварц', 'МосКарьер'),
    ('Барий углекислый', 'Горная компания'),
    ('Жидкое стекло', 'КурскРесурс'),
    ('Шамот', 'Горная компания'),
    ('Глина', 'ГорТехРазработка'),
    ('Кварц', 'Карелия добыча'),
    ('Гидрослюда', 'Железногорская руда'),
    ('Перлит', 'ВоронежРудоКомбинат'),
    ('Шамот', 'Арсенал'),
    ('Барий углекислый', 'КамчаткаСтройМинералы'),
    ('Бура техническая', 'КамчаткаСтройМинералы'),
    ('Техническая сода', 'Минерал Ресурс'),
    ('Пирофосфат натрия', 'КамчаткаСтройМинералы'),
    ('Гидрослюда', 'Белая гора'),
    ('Жильный кварц', 'Карелия добыча'),
    ('Перлит', 'Смоленский добывающий комбинат'),
    ('Кварцевый песок', 'Карелия добыча'),
    ('Монтмориллонит', 'Белая гора'),
    ('Краска-раствор', 'КурскРесурс'),
    ('Стекло', 'Сапфир'),
    ('Порошок цветной', 'КурскРесурс'),
    ('Каолин', 'БрянскСтройресурс'),
    ('Жидкое стекло', 'Минерал Ресурс'),
    ('Бура техническая', 'Сапфир'),
    ('Дегидратированная глина', 'МосКарьер'),
    ('Бура техническая', 'Нижегородская разработка'),
    ('Монтмориллонит', 'Железногорская руда'),
    ('Жидкое стекло', 'Московский ХимЗавод'),
    ('Жидкое стекло', 'Сапфир'),
    ('Порошок цветной', 'Московский ХимЗавод'),
    ('Порошок цветной', 'ХимБытСервис'),
    ('Углещелочной реагент', 'Московский ХимЗавод'),
    ('Кварц', 'Речная долина'),
    ('Жильный кварц', 'Нижегородская разработка'),
    ('Краска-раствор', 'Московский ХимЗавод'),
    ('Кварц', 'Нижегородская разработка'),
    ('Дегидратированная глина', 'Стройкомплект'),
    ('Кварцевый песок', 'Речная долина'),
    ('Барий углекислый', 'Сапфир'),
    ('Шамот', 'Стройкомплект'),
    ('Дегидратированная глина', 'Сапфир'),
    ('Гидрослюда', 'Тульский обрабатывающий завод'),
    ('Пирофосфат натрия', 'Сапфир'),
    ('Перлит', 'Тульский обрабатывающий завод'),
    ('Техническая сода', 'Сапфир'),
    ('Глина', 'Смоленский добывающий комбинат'),
    ('Техническая сода', 'Московский ХимЗавод'),
    ('Монтмориллонит', 'Смоленский добывающий комбинат'),
    ('Углещелочной реагент', 'КурскРесурс'),
    ('Техническая сода', 'ХимБытСервис'),
    ('Бура техническая', 'Стройкомплект'),
    ('Пирофосфат натрия', 'Тульский обрабатывающий завод'),
    ('Жильный кварц', 'Смоленский добывающий комбинат'),
    ('Стекло', 'Стройкомплект'),
    ('Углещелочной реагент', 'ХимБытСервис'),
    ('Барий углекислый', 'Тульский обрабатывающий завод'),
    ('Пирофосфат натрия', 'ХимБытСервис'),
    ('Каолин', 'Тульский обрабатывающий завод'),
    ('Шамот', 'МосКарьер'),
    ('Углещелочной реагент', 'Тульский обрабатывающий завод'),
    ('Краска-раствор', 'ХимБытСервис'),
    ('Полевой шпат', 'Смоленский добывающий комбинат')
) AS t(material_name, supplier_name)
JOIN materials m ON m.material_name = t.material_name
JOIN suppliers s ON s.supplier_name = t.supplier_name;
